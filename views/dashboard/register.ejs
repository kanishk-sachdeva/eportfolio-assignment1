<%- include( 'partials/header' ); %>

  <body>

    <header>
      <%- include( 'partials/navbar'); %>
    </header>


    <main>
      <div class="container" style="max-width: 625px;">

        <form method="post" action="/users/register">
          <fieldset>
            <div class="form-group mb-4">
              <h2 style="font-family: 'Times New Roman', Times, serif;" class="form-label mt-4">Registration</h2>

              <% if(locals.errors){ %>

                <% errors.forEach(function(error) { %>
                  <div class="alert alert-dismissible alert-danger">
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>

                    <%= error.msg %>
                      <!-- <% if(errors.length > 1){ %>
                        <br>
                        <% } %> -->
                  </div>
                  <% }); %>


                    <% } %>


                      <div class="form-floating mb-3">
                        <input type="name" id="name" name="name" class="form-control" placeholder="Enter Name"
                          value="<%= typeof name != 'undefined' ? name : '' %>" />
                        <label for="name">Name</label>
                      </div>
                      <div class="form-floating mb-3">
                        <input type="email" id="email" name="email" class="form-control" placeholder="Enter Email"
                          value="<%= typeof email != 'undefined' ? email : '' %>" />
                        <label for="email">Email address</label>
                      </div>
                      <div class="form-floating mb-3">
                        <input type="password" id="password" name="password" class="form-control"
                          placeholder="Create Password" value="<%= typeof password != 'undefined' ? password : '' %>" />
                        <label for="password">Password</label>
                      </div>
                      <div class="form-floating">
                        <input type="password" id="password2" name="password2" class="form-control"
                          placeholder="Confirm Password"
                          value="<%= typeof password2 != 'undefined' ? password2 : '' %>" />
                        <label for="password2">Re-enter Password</label>
                      </div>
            </div>
          </fieldset>
          <button type="submit"
            style="padding-top: 10px; font-size: 24px; font-weight: 900; color: white; padding-bottom: 10px; width: 100%;"
            class="btn btn-warning">Register</button>

          <a class="askIfUser" href="/users/login">Already Have a Account?</a>
        </form>

      </div>

    </main>

<% if(locals.successredirect){ %>
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
      <div class="toast show align-items-center text-white bg-success border-0" role="alert" aria-live="assertive"
        aria-atomic="true">
        <div class="d-flex">
          <div class="toast-body">
            Success! Your account is created<br>
            Redirecting to login page in 5 sec..


          </div>
          <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
            aria-label="Close"></button>
        </div>
      </div>
    </div>
    <script>
      setTimeout(function () {
        window.location.href = '/users/login';
      }, 5000);
    </script>
    <% } %>


    <div style="height: 100px;"></div>


    <%- include( 'partials/footer' ); %>

  </body>

  </html>